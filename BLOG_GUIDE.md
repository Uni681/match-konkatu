# ブログ投稿ガイド

## 📝 ブログ記事の投稿方法

### ステップ1: 管理画面にログイン

1. https://3000-ipzuvjg8iqqi5f2tdtgbq-6532622b.e2b.dev/admin/login にアクセス
2. ログイン情報を入力：
   - ユーザー名: `admin`
   - パスワード: `match2024`

### ステップ2: 新規投稿ページへ移動

1. サイドバーから **「新規投稿」** をクリック
2. または、ダッシュボードの **「新規投稿」** ボタンをクリック

### ステップ3: 記事情報を入力

#### 必須項目（*マーク付き）

**1. タイトル** *
- 記事のタイトルを入力
- 例: `婚活成功の秘訣：理想のパートナーと出会うための5つのポイント`

**2. スラッグ（URL）** *
- URLに使用される英数字の識別子
- 半角英数字とハイフン（-）のみ使用可能
- 例: `konkatsu-success-tips`
- ⚠️ 後から変更できないので注意！

**3. 説明文** *
- 検索結果やSNSシェア時に表示される短い説明文
- 100-160文字程度が推奨
- 例: `結婚相談所カウンセラーが教える婚活成功の秘訣。プロフィール作成から初回デートまで、理想のパートナーと出会うための実践的なアドバイスをご紹介します。`

**4. 本文** *
- Markdown形式で記事本文を書く
- 見出し、太字、リストなどを使える
- 詳しくは「Markdown記法」を参照

**5. 公開日時** *
- 記事の公開日時を設定
- デフォルトは現在時刻

**6. カテゴリー** *
- 以下から選択：
  - 婚活ノウハウ
  - イベント情報
  - お知らせ
  - 成婚事例

#### 任意項目

**7. アイキャッチ画像URL**
- 記事のサムネイル画像
- 画像は `/img/blog/` に配置
- 例: `/img/blog/konkatsu-success-tips.jpg`

**8. タグ（カンマ区切り）**
- 記事に関連するキーワード
- 複数指定可能（カンマで区切る）
- 例: `婚活成功, プロフィール作成, デートのコツ, パートナー選び`

**9. 注目記事として表示**
- チェックを入れるとトップページに表示される

**10. 下書きとして保存**
- チェックを入れると下書き状態（非公開）になる
- 公開前の確認や編集中に便利

### ステップ4: プレビュー確認

1. **「プレビュー」** ボタンをクリック
2. モーダルウィンドウで記事の見た目を確認
3. 問題なければ閉じる

### ステップ5: 公開または下書き保存

**公開する場合：**
1. 「下書きとして保存」のチェックを**外す**
2. **「公開する」** ボタンをクリック

**下書き保存する場合：**
1. 「下書きとして保存」に**チェックを入れる**
2. **「公開する」** ボタンをクリック

### ステップ6: Markdownファイルを保存

⚠️ **重要：現在の仕様では、記事データを手動で保存する必要があります**

1. 「公開する」ボタンを押すと、**Markdownコードが表示**されます
2. このコードを**全てコピー**します
3. ファイルマネージャーまたはエディタで `/home/user/webapp/content/posts/` フォルダを開く
4. 表示されたファイル名（例: `2024-12-15-konkatsu-success-tips.md`）で**新規ファイルを作成**
5. コピーしたMarkdownコードを**ペースト**して保存

### ステップ7: サイトを再ビルド

記事を公開するには、サイトを再ビルドする必要があります：

```bash
cd /home/user/webapp
npm run build
pm2 restart match-konkatsu
```

または、GitHubにプッシュしてCloudflare Pagesで自動デプロイ：

```bash
cd /home/user/webapp
git add .
git commit -m "新しいブログ記事を追加"
git push origin main
npx wrangler pages deploy dist --project-name match-konkatsu
```

---

## ✏️ Markdown記法の基本

### 見出し

```markdown
# 大見出し（H1）
## 中見出し（H2）
### 小見出し（H3）
```

### 太字・斜体

```markdown
**太字テキスト**
*斜体テキスト*
```

### リスト

```markdown
- リスト項目1
- リスト項目2
  - サブ項目2-1
  - サブ項目2-2

1. 番号付きリスト1
2. 番号付きリスト2
3. 番号付きリスト3
```

### リンク

```markdown
[リンクテキスト](https://example.com)
```

### 画像

```markdown
![画像の説明](/img/blog/image.jpg)
```

### 引用

```markdown
> これは引用文です。
> 複数行も可能です。
```

### コード

```markdown
`インラインコード`

\`\`\`
複数行のコード
ブロック
\`\`\`
```

---

## 📂 画像のアップロード方法

### 1. 画像を準備

- JPG、PNG、WebP形式がおすすめ
- サイズ: 横1200px程度が最適
- ファイル名: 半角英数字とハイフン（例: `konkatsu-tips-2024.jpg`）

### 2. 画像を配置

```bash
/home/user/webapp/public/img/blog/
```

このフォルダに画像ファイルをアップロードします。

### 3. 記事内で参照

```markdown
![説明文](/img/blog/konkatsu-tips-2024.jpg)
```

または、アイキャッチ画像URLに設定：
```
/img/blog/konkatsu-tips-2024.jpg
```

---

## 🔄 記事の編集方法

### 既存記事を編集する

1. 管理画面の **「ブログ管理」** をクリック
2. 編集したい記事の **「編集」ボタン** をクリック
3. 内容を修正
4. **「更新する」** ボタンをクリック
5. 表示されたMarkdownコードで元のファイルを**上書き保存**
6. サイトを再ビルド

### 記事を削除する

1. ブログ管理画面で **「削除」ボタン** をクリック
2. 確認ダイアログで **「OK」** をクリック
3. `/home/user/webapp/content/posts/` から該当ファイルを削除
4. サイトを再ビルド

---

## ❓ よくある質問

### Q1: 記事が表示されないのはなぜ？

**A:** 以下を確認してください：
1. Markdownファイルが `content/posts/` に保存されているか
2. ファイル名が `YYYY-MM-DD-slug.md` の形式か
3. サイトを再ビルドしたか
4. 「下書きとして保存」がチェックされていないか

### Q2: 画像が表示されない

**A:** 以下を確認してください：
1. 画像ファイルが `public/img/blog/` にあるか
2. 画像パスが `/img/blog/ファイル名` になっているか
3. ファイル名に日本語やスペースが含まれていないか

### Q3: Markdownファイルを手動で作成する必要があるのはなぜ？

**A:** Cloudflare Workers環境では、セキュリティ上の理由でファイルシステムへの書き込みができないためです。将来的にはGitHub APIやR2ストレージを使った自動保存機能を実装予定です。

### Q4: 複数の記事を一度に公開できますか？

**A:** はい、可能です。それぞれの記事のMarkdownファイルを作成し、一度にビルドすれば全て公開されます。

---

## 📞 サポート

記事投稿で困ったことがあれば、開発者に連絡してください。
